<!DOCTYPE html>
<html lang="en">
<head><meta charset="utf-8">

<link rel="stylesheet" type="text/css" href="/css/stylesheet-mobile-minified.css" >



<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="/javascript/resize-fit-minified.js"></script>

<link rel="alternate"  type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/jenkov-com?format=xml" />


<meta name="viewport" content="width=device-width" />

<title>Implementing hashCode() and equals() in your classes, for use with Java Collections.</title>

<META NAME="Title" CONTENT="Implementing hashCode() and equals() in your classes, for use with Java Collections.">



<LINK REL="schema.dc" HREF="http://purl.org/metadata/dublin_core_elements">
<META NAME="DC.Title" CONTENT="Implementing hashCode() and equals() in your classes, for use with Java Collections.">

<META NAME="DC.Subject" CONTENT="Implementing hashCode() and equals() in your classes, for use with Java Collections.">

<META NAME="Robots" CONTENT="ALL">




<link href="https://plus.google.com/108227213807945109821" rel="publisher" />


<meta name="google-site-verification" content="i_TwzdElg-by5uXLvyAjuIaCjxo0yjtW8LdRPUDEEcw" />


<style>


#body-div {
    width             : 870px; /* default with 900px wide page */

    padding-left      : 10px;
    padding-right     : 20px;
    padding-top       : 10px;

    background-color  : #ffffff;

}

#left-bar {
    width             : 240px;
    background-color  : #ffffff;
    padding           : 10px;
    float             : left;
}
#left-bar-menu a {
    font-size         : 0.9em;
}

#article-div {
    width             : 606px;    /* default size with 900px wide page */
    display           : block;
    float             : left;
    background-color  : #ffffff;
    border-x          : 1px solid black;
}

#side-ads {
    padding-left: 10px; /* +10 from left-bar, so 20 in total */
}

#top-ads {
    padding-left : 20px;
}
#bottom-ads {
    padding-left : 36px;
}


.book-link {
    height            : 100px;
    background-repeat : no-repeat;
    border            : 1px solid #eeeeee;
    margin-top        : 30px;
    padding-left      : 102px;
    color             : #333333;
    font-weight       : normal;
    cursor            : pointer;
}
.book-link p{
    margin-top        : 0px;
    padding-top       : 5px;
    padding-right     : 20px;
    font-size         : 0.8em;
}
.book-link-title {
    margin-top        :  5px;
    margin-bottom     :  5px;
    font-size         : 0.9em;
    font-weight       : bold;
}


.signupframe {
    border: 1px solid #cccccc;
    background: #ffffff;
    color: #002d62;
    font-family: Arial, Helvetica, sans-serif;
}


.articleTopMiniHeader {
    Font-size: 13px; Font-weight: bold;
}
.articleTopMiniHeaderCell {
    border-bottomx: 1px solid #cccccc;
}
</style>

</head>

<body>

<div id="page-div">

    <div id="header">
        <div id="header-div">
            <div id="link-bar" style="float: left;">

                <a href="http://tutorials.jenkov.com">TUTORIALS</a> &nbsp;&nbsp;|&nbsp;&nbsp;
                <a href="http://jenkov.com/books/index.html">BOOKS</a> &nbsp;&nbsp;|&nbsp;&nbsp;
                <a href="http://butterfly.jenkov.com">BUTTERFLY COMPONENTS</a> &nbsp;|&nbsp;&nbsp;
                <a href="http://jenkov.com/about/index.html">ABOUT</a> &nbsp;&nbsp;|&nbsp;&nbsp;
                <a href="http://feeds2.feedburner.com/jenkov-com">RSS</a>
            </div>
            <div id="logo-bar">
                <br/><br/><br/>
                &nbsp;&nbsp;&nbsp;A Voice in the Buzz on Software
            </div>
            &nbsp;
        </div>
        <div id="header-divider"></div>
    </div>

    <div id="body-div">

        <div id="top-ads">
            <script type="text/javascript"><!--
            google_ad_client = "ca-pub-5569543489255665";
            /* Tutorials - Top Banner */
            google_ad_slot = "7630855405";
            google_ad_width = 728;
            google_ad_height = 90;
            //-->
            </script>
            <script type="text/javascript"
                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
            </script>
        </div>

        <div id="left-bar" >
            <div id="left-bar-menu"><table cellspacing="2" border="0" width="100%" style="padding-right: 10px;" bgcolor="#ffffff" style="border-bottom: 1px solid #dddddd">
    <tr>
        <!--<td colspan="2"><img src="/images/toc.png" alt="Table of Contents"/></td>-->
        <td colspan="3" style="padding-top:10px;"><span class="trailhead">&nbsp;&nbsp;Java Collections</span></td>
    </tr>
    <tr><td height="5"></td></tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="index.html">Java Collections Introduction</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="overview.html">Overview of Interfaces</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="iterable.html">Iterable</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="collection.html">Collection</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="generic-collections.html">Generic Collections</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="list.html">List</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="set.html">Set</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="sortedset.html">SortedSet</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="navigableset.html">NavigableSet</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="map.html">Map</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="sortedmap.html">SortedMap</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="navigablemap.html">NavigableMap</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="queue.html">Queue</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="deque.html">Deque</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="stack.html">Stack</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="hashcode-equals.html">hashCode() and equals()</a></td>
    </tr>
    <tr>
        <td width="10"></td>
        <td style="padding-right: 4px;" valign="top"><img src="/images/arrow-right-light-medium.png" alt=""></td>
        <td style="padding-top: 2px;"><a href="sorting.html">Sorting</a></td>
    </tr>

    <tr><td>&nbsp;</td></tr>
    
</table>
</div>
            <br/><br/>

            

<div id="SignUp">
    <form action="http://jenkov.us4.list-manage.com/subscribe/post?u=39844b57926863757a8be6553&amp;id=74bcc45775" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank">
        <table width="100%" class="signupframe" border="0" cellspacing="0" cellpadding="5">
            <tr><td colspan="2"><font color="red"><b>Jakob Jenkov's Free Tips & Tutorials!</b></font></td></tr>
            <tr><td colspan="2" valign="top"><img src="/images/layout/small-portrait_mini.jpg" align="right" width="111" height="127">
                Sign up for my news letter or <a href="http://feeds2.feedburner.com/jenkov-com" target="_blank">RSS feed</a>, and
                never miss any of my tips about Java and web development.

            </td></tr>
            <tr>
                <td valign=top align=right>
                    <font size="1" face="Arial,Helvetica, sans-serif">*</font> <font size="2">First Name</font>
                </td>
                <td align=left>
                    <input type="text" value="" name="FNAME" class="" id="mce-FNAME">
                </td>
            </tr>
            <tr>
                <td valign=top align=right>
                    <font size="1" face="Arial,Helvetica, sans-serif">*</font> <font size="2">Last Name</font>
                </td>
                <td align=left>
                    <input type="text" value="" name="LNAME" class="" id="mce-LNAME">
                </td>
            </tr>
            <tr>
                <td valign=top align=right>
                    <font size="1" face="Arial,Helvetica, sans-serif">*</font> <font size="2">Email</font>
                </td>
                <td align=left>
                    <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
                </td>
            </tr>
            <input type=hidden name="listid" value="9579">
            <input type=hidden name="specialid:9579" value="SW15">

            <input type=hidden name=clientid value="435086">
            <input type=hidden name=formid value="587">
            <input type=hidden name=reallistid value="1">
            <input type=hidden name=doubleopt value="1">
            <tr>
                <td> </td>
                <td><input type="submit" value="Yes, give me tips!" name="subscribe" id="mc-embedded-subscribe" class="button"></td>
            </tr>
            <tr><td colspan="2" align="center"><a href="http://feeds2.feedburner.com/jenkov-com"><img src="http://feeds2.feedburner.com/~fc/jenkov-com?bg=FF9900&amp;fg=000000&amp;anim=0" height="26" width="88" style="border:0" alt="" /></a></td></tr>
            <tr><td colspan="2" align="center"><a href='http://www.twitter.com/jjenkov' style="font-size: 0.8em;"><img src="/images/social-site-icons/twitter_32.png" border="0" width="32" alt="Follow me on Twitter"> Follow me on Twitter</a></td></tr>
        </table>
    </form>
</div>
<br/>

            <div id="side-ads">
                <script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                <ins class="adsbygoogle"
                     style="display:inline-block;width:160px;height:600px"
                     data-ad-client="ca-pub-5569543489255665"
                     data-ad-slot="3389666608"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
            <br/><br/>
        </div>

        <div id="article-div">
            

<h1>Implementing hashCode() and equals()</h1>






<table cellpadding="0" cellspacing="0" border="0" width="100%" >

    <tr>
        <td>
            
            <img src="/images/layout/small-portrait_mini.jpg"  width="111" height="127"><br/>
            <span class="author">By <a target="jakob-jenkov" href="http://jakob.jenkov.com">Jakob Jenkov</a></span>
        </td>
        <td align="left" valign="top">

            <table width="100%">
                
                
                <tr><td align="left" valign="top">
                        
                        <div style="float: left;">
                        <script type="text/javascript" src="https://apis.google.com/js/plusone.js" async></script>
                        <g:plusone></g:plusone>
                        </div>

                        
                        <div style="float: left;">
                        <script type="text/javascript">var dzone_style = '2';</script>
                        <script language="javascript" src="http://widgets.dzone.com/links/widgets/zoneit.js"></script>
                        </div>

                         
                         <div style="float:left;">
                         
                         <a href="javascript:window.location = 'http://www.facebook.com/sharer.php?u=' + encodeURIComponent (location.href)+'&t='+encodeURIComponent( document.title);" target="_blank">Share on Facebook</a>
                     </div>
                    </td>
                </tr>
                <tr>
                    <td height="10"></td>
                </tr>

                
                <tr>
                    <td colspan="3">
                        <table width="100%">
                            <tr><td class="articleTopMiniHeaderCell" colspan="2"><span class="articleTopMiniHeader">Connect with me:&nbsp;&nbsp;</span></td></tr>
                            <tr>
                                <td align="left" valign="top">
                                    <a href="https://plus.google.com/108227213807945109821?rel=author" style="text-decoration:none;" title="Connect on Google+" target="_blank" rel="author"><img src="https://ssl.gstatic.com/images/icons/gplus-32.png" alt="" style="border:0;width:32px;height:32px;"/></a>
                                    &nbsp;
                                    <a href="https://twitter.com/#!/jjenkov" title="Follow on Twitter" target="_blank"><img src="/images/social-site-icons/twitter_32.png" border="0" width="32"></a>
                                </td>
                                <td  valign="top" align="right">
                                    
                                    <a href="http://feeds2.feedburner.com/~r/jenkov-com/~6/5"><img src="http://feeds2.feedburner.com/jenkov-com.5.gif" alt="Jenkov.com - News" style="border:0"></a>
                                </td>
                            </tr>
                        </table>

                    </td>
                </tr>
            </table>
        </td>
    </tr>

    <tr>
        <td>
        </td>
    </tr>

</table>


<p>
    The methods <code>hashCode()</code> and  <code>equals()</code> play a distinct role
    in the objects you insert into Java collections. The specific contract rules of
    these two methods are best described in the JavaDoc. Here I will just tell you
    what role they play. What they are used for, so you know why their implementations
    are important.
</p>


<br/>
<h2>equals()</h2>
<p>
    <code>equals()</code> is used in most collections to determine if a collection contains a
    given element. For instance:
</p>

<pre class="codeBox">
List list = new ArrayList();
list.add("123");

<b>boolean contains123 = list.contains("123");</b>
</pre>

<p>
    The <code>ArrayList</code> iterates all its elements and execute <code>"123".equals(element)</code>
    to determine if the element is equal to the parameter object "123". It is the
    <code>String.equals()</code> implementation that determines if two strings are equal.
</p>

<p>
    The <code>equals()</code> method is also used when removing elements. For instance:
</p>

<pre class="codeBox">
List list = new ArrayList();
list.add("123");

<b>boolean removed = list.remove("123");</b>
</pre>

<p>
    The <code>ArrayList</code> again iterates all its elements and execute <code>"123".equals(element)</code>
    to determine if the element is equal to the parameter object "123". The first element it finds that
    is equal to the given parameter "123" is removed.
</p>

<p>
    As you can see, a proper implementation of <code>.equals()</code> is essential for your own classes
    to work well with the Java Collection classes. So how do you implement <code>equals()</code> "properly"?
</p>

<p>
    So, when are two objects equal? That depends on your application, the classes, and what you are trying to do.
    For instance, let's say you are loading and processing <code>Employee</code> objects stored in a database.
    Here is a simple example of such an <code>Employee</code> class:
</p>

<pre class="codeBox">
public class Employee {
    protected long   employeeId;
    protected String firstName;
    protected String lastName;
}
</pre>

<p>
    You could decide that two <code>Employee</code> objects are equal to each other if just their <code>employeeId</code>'s
    are equal. Or, you could decide that all fields must be equal - both <code>employeeId</code>, <code>firstName</code>
    and <code>lastName</code>. Here are two example implementation of <code>equals()</code> matching these criterias:
</p>

<pre class="codeBox">
public class Employee {
  ...
  public boolean equals(Object o){
    if(o == null)                return false;
    if(!(o instanceof) Employee) return false;

    Employee other = (Employee) o;
    return this.employeeId == other.employeeId;
  }
}
</pre>

<pre class="codeBox">
public class Employee {
  ...
  public boolean equals(Object o){
    if(o == null)                return false;
    if(!(o instanceof) Employee) return false;

    Employee other = (Employee) o;
    if(this.employeeId != other.employeeId)      return false;
    if(! this.firstName.equals(other.firstName)) return false;
    if(! this.lastName.equals(other.lastName))   return false;

    return true;
  }
}
</pre>


<p>
    Which of these two implementations is "proper" depends on what you need to do. Sometimes you need to lookup
    an <code>Employee</code> object from a cache. In that case perhaps all you need is for the <code>employeeId</code>
    to be equal. In other cases you may need more than that - for instance to determine if a copy of an <code>Employee</code>
    object has changed from the original.
</p>


<br/>
<h2>hashCode()</h2>

<p>
    The <code>hashCode()</code> method of objects is used when you insert them into a <code>HashTable</code>, <code>HashMap</code>
    or <code>HashSet</code>. If you do not know the theory of how a hashtable works internally, you can read about
    <a href="http://en.wikipedia.org/wiki/Hashtable" target="_blank">hastables on Wikipedia.org</a>.
</p>

<p>
    When inserting an object into a hastable you use a key. The hash code of this key is calculated, and used to
    determine where to <b>store</b> the object internally. When you need to lookup an object in a hashtable you also
    use a key. The hash code of this key is calculated and used to determine where to <b>search</b> for the object.
</p>
<p>
    The hash code only points to a certain "area" (or list, bucket etc) internally. Since different key objects
    could potentially have the same hash code, the hash code itself is no guarantee that the right key is found.
    The hashtable then iterates this area (all keys with the same hash code) and uses the
    key's <code>equals()</code> method to find the right key. Once the right key is found, the object stored for
    that key is returned.
</p>

<p>
    So, as you can see, a combination of the <code>hashCode()</code> and <code>equals()</code> methods are used
    when storing and when looking up objects in a hashtable.
</p>

<p>
    Here are two rules that are good to know about implementing the <code>hashCode()</code> method in your own classes,
    if the hashtables in the Java Collections API are to work correctly:
</p>

<ol>
    <li>If object1 and object2 are equal according to their <code>equals()</code> method, they must also have the same hash code.</li>
    <li>If object1 and object2 have the same hash code, they do NOT have to be equal too.</li>
</ol>

<p>
    In shorter words:
</p>

<ol>
    <li>If equal, then same hash codes too.</li>
    <li>Same hash codes no guarantee of being equal.</li>
</ol>

<p>
    Here are two example implementation of the <code>hashCode()</code> method matching the <code>equals()</code> methods
    shown earlier:
</p>


<pre class="codeBox">
public class Employee {
  protected long   employeeId;
  protected String firstName;
  protected String lastName;

  public int hashCode(){
    return (int) this.employeeId;
  }
}
</pre>

<pre class="codeBox">
public class Employee {
    protected long   employeeId;
    protected String firstName;
    protected String lastName;

  public int hashCode(Object o){
    return (int)this.employeeId *
                firstName.hashCode() *
                lastName.hashCode();
  }
}
</pre>

<p>
    Notice, that if two <code>Employee</code> objects are equal, they will also have the same hash code. But,
    as is especially easy to see in the first example, two <code>Employee</code> objects can be not equal,
    and still have the same hash code.
</p>
<p>
    In both examples the hash code is the <code>employeeId</code> is rounded down to
    an <code>int</code>. That means that many employee id's could result in the same hash code, but these
    <code>Employee</code> objects would still not be equal, since they don't have the same employee id.
</p>



<br/>
<h2>More Detail in the JavaDoc</h2>
<p>
    For a 100% precise description of how to implement <code>equals()</code> and <code>hashCode()</code> you should
    check out the official JavaDoc's. The purpose of this text was mostly to explain how they are used by the
    Java Collection classes. Understanding this makes it easier to implement them to suit your purposes.
</p>




            <br/>
        </div>


    </div>


<div id="bottom-ads">
<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-5569543489255665"
     data-ad-slot="7776167002"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>

<br/><br/><br/>
</div>

    <div id="footer-divider"></div>
    <div id="footer"></div>

</div>


<script>
    $(document).ready(function() {

        //alert($("body").width());

        $(window).resize(function(event) {
            doResize(false);
        });

        // resize window depending on browser size.
        doResize(false);

        // activate book link, if any present.
        $(".book-link").click(function() {
            window.open( $(this).attr("book-link-url"));
        });

        
    });

</script>


<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-4036229-3']);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

</script>





</body>


</html>