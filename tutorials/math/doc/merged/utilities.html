<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jan 9, 2013 ( $Revision: 1.1 $ ) -->
<!-- $HeadURL: https://svn.apache.org/repos/asf/commons/proper/commons-skin/trunk/src/main/resources/META-INF/maven/site.vm $ -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
  <title>
    The Commons Math User Guide - Utilites</title> 
  <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style> 
  <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" /> 
  <meta name="Date-Revision-yyyymmdd" content="20130109" /> 
  <meta http-equiv="Content-Language" content="en" /> 
  <link rel="stylesheet" type="text/css" media="all" href="../css/prettify.css" /> 
  <script src="../js/prettify.js" type="text/javascript"></script> 
  <script type="text/javascript">window.onload=function() {
            prettyPrint();
        }</script> 
 </head> 
 <body class="composite"> 
  <div id="banner"> 
   <div id="bannerLeft"> 
    <a href="http://commons.apache.org/" title="Apache Commons logo"> <img src="../images/commons-logo.png" alt="Apache Commons logo" /> </a> 
   </div> 
   <!-- id="bannerLeft" --> 
   <div id="bannerRight"> 
    <a href="../index.html"> <img src="../images/math.gif" alt="Commons Math" /> </a> 
   </div> 
   <!-- id="bannerRight" --> 
   <div class="clear"> 
    <hr /> 
   </div> 
  </div> 
  <div id="breadcrumbs"> 
   <div class="xleft"> 
    <span id="publishDate">Last Published: 09 January 2013</span> &nbsp;| 
    <span id="projectVersion">Version: 3.1.1</span> 
   </div> 
   <div class="xright"> 
    <a href="http://www.apachecon.com/" class="externalLink" title="ApacheCon">ApacheCon</a> | 
    <a href="http://www.apache.org" class="externalLink" title="Apache">Apache</a> | 
    <a href="../../" title="Commons">Commons</a> 
   </div> 
   <div class="clear"> 
    <hr /> 
   </div> 
  </div> 
  <div id="leftColumn"> 
   <div id="navcolumn"> 
    <h5>Math</h5> 
    <ul> 
     <li class="none"> <a href="../index.html" title="Overview">Overview</a> </li> 
     <li class="none"> <a href="../download_math.cgi" title="Downloads">Downloads</a> </li> 
     <li class="none"> <a href="../apidocs/index.html" title="Latest API docs (development)">Latest API docs (development)</a> </li> 
     <li class="none"> <a href="../api-3.1.1/index.html" title="Javadoc (3.1.1 release)">Javadoc (3.1.1 release)</a> </li> 
     <li class="none"> <a href="../api-3.1/index.html" title="Javadoc (3.1 release)">Javadoc (3.1 release)</a> </li> 
     <li class="none"> <a href="../api-3.0/index.html" title="Javadoc (3.0 release)">Javadoc (3.0 release)</a> </li> 
     <li class="none"> <a href="../api-2.2/index.html" title="Javadoc (2.2 release)">Javadoc (2.2 release)</a> </li> 
     <li class="none"> <a href="../issue-tracking.html" title="Issue Tracking">Issue Tracking</a> </li> 
     <li class="none"> <a href="http://svn.apache.org/viewvc/commons/proper/math/trunk" class="externalLink" title="Source Repository (current)">Source Repository (current)</a> </li> 
     <li class="none"> <a href="http://wiki.apache.org/commons/Math" class="externalLink" title="Wiki">Wiki</a> </li> 
     <li class="none"> <a href="../developers.html" title="Developers Guide">Developers Guide</a> </li> 
     <li class="none"> <a href="../proposal.html" title="Proposal">Proposal</a> </li> 
    </ul> 
    <h5>User Guide</h5> 
    <ul> 
     <li class="none"> <a href="../userguide/index.html" title="Contents">Contents</a> </li> 
     <li class="none"> <a href="../userguide/overview.html" title="Overview">Overview</a> </li> 
     <li class="none"> <a href="../userguide/stat.html" title="Statistics">Statistics</a> </li> 
     <li class="none"> <a href="../userguide/random.html" title="Data Generation">Data Generation</a> </li> 
     <li class="none"> <a href="../userguide/linear.html" title="Linear Algebra">Linear Algebra</a> </li> 
     <li class="none"> <a href="../userguide/analysis.html" title="Numerical Analysis">Numerical Analysis</a> </li> 
     <li class="none"> <a href="../userguide/special.html" title="Special Functions">Special Functions</a> </li> 
     <li class="none"> <strong>Utilities</strong> </li> 
     <li class="none"> <a href="../userguide/complex.html" title="Complex Numbers">Complex Numbers</a> </li> 
     <li class="none"> <a href="../userguide/distribution.html" title="Distributions">Distributions</a> </li> 
     <li class="none"> <a href="../userguide/fraction.html" title="Fractions">Fractions</a> </li> 
     <li class="none"> <a href="../userguide/transform.html" title="Transform Methods">Transform Methods</a> </li> 
     <li class="none"> <a href="../userguide/geometry.html" title="3D Geometry">3D Geometry</a> </li> 
     <li class="none"> <a href="../userguide/optimization.html" title="Optimization">Optimization</a> </li> 
     <li class="none"> <a href="../userguide/ode.html" title="Ordinary Differential Equations">Ordinary Differential Equations</a> </li> 
     <li class="none"> <a href="../userguide/genetics.html" title="Genetic Algorithms">Genetic Algorithms</a> </li> 
     <li class="none"> <a href="../userguide/filter.html" title="Filters">Filters</a> </li> 
    </ul> 
    <h5>Project Documentation</h5> 
    <ul> 
     <li class="collapsed"> <a href="../project-info.html" title="Project Information">Project Information</a> </li> 
     <li class="collapsed"> <a href="../project-reports.html" title="Project Reports">Project Reports</a> </li> 
    </ul> 
    <h5>Commons</h5> 
    <ul> 
     <li class="none"> <a href="../../" title="Home">Home</a> </li> 
     <li class="none"> <a href="http://www.apache.org/licenses/" class="externalLink" title="License">License</a> </li> 
     <li class="collapsed"> <a href="../../components.html" title="Components">Components</a> </li> 
     <li class="collapsed"> <a href="../../sandbox/index.html" title="Sandbox">Sandbox</a> </li> 
     <li class="collapsed"> <a href="../../dormant/index.html" title="Dormant">Dormant</a> </li> 
    </ul> 
    <h5>General Information</h5> 
    <ul> 
     <li class="none"> <a href="../../volunteering.html" title="Volunteering">Volunteering</a> </li> 
     <li class="none"> <a href="../../patches.html" title="Contributing Patches">Contributing Patches</a> </li> 
     <li class="none"> <a href="../../building.html" title="Building Components">Building Components</a> </li> 
     <li class="none"> <a href="../../releases/index.html" title="Releasing Components">Releasing Components</a> </li> 
     <li class="none"> <a href="http://wiki.apache.org/commons/FrontPage" class="externalLink" title="Wiki">Wiki</a> </li> 
    </ul> 
    <h5>ASF</h5> 
    <ul> 
     <li class="none"> <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How the ASF works">How the ASF works</a> </li> 
     <li class="none"> <a href="http://www.apache.org/foundation/getinvolved.html" class="externalLink" title="Get Involved">Get Involved</a> </li> 
     <li class="none"> <a href="http://www.apache.org/dev/" class="externalLink" title="Developer Resources">Developer Resources</a> </li> 
     <li class="none"> <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsorship">Sponsorship</a> </li> 
     <li class="none"> <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">Thanks</a> </li> 
    </ul> 
    <a href="http://www.apache.org/events/current-event.html" title="ApacheCon" class="poweredBy"> <img class="poweredBy" alt="ApacheCon" src="http://www.apache.org/events/current-event-125x125.png" /> </a> 
    <a href="http://maven.apache.org/" title="Maven" class="poweredBy"> <img class="poweredBy" alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png" /> </a> 
   </div> 
  </div> 
  <div id="bodyColumn"> 
   <div id="contentBox"> 
    <!-- Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. --> 
    <!-- $Id: utilities.html,v 1.1 2013/08/12 15:49:58 gpetro6 Exp $ --> 
    <div class="section"> 
     <h2>6 Utilities<a name="a6_Utilities"></a></h2> 
     <div class="section"> 
      <h3>6.1 Overview<a name="a6.1_Overview"></a></h3> 
      <p> The <a href="../apidocs/org/apache/commons/math3/util/package-summary.html"> org.apache.commons.math3.util</a> package collects a group of array utilities, value transformers, and numerical routines used by implementation classes in commons-math. </p> 
     </div> 
     <div class="section"> 
      <h3>6.2 Double array utilities<a name="a6.2_Double_array_utilities"></a></h3> 
      <p> To maintain statistics based on a &quot;rolling&quot; window of values, a resizable array implementation was developed and is provided for reuse in the <tt>util</tt> package. The core functionality provided is described in the documentation for the interface, <a href="../apidocs/org/apache/commons/math3/util/DoubleArray.html"> 
        <clt fqn="org.apache.commons.math3.util.DoubleArray" api="DoubleArray" kind="class">
          DoubleArray 
        </clt></a>. This interface adds one method, <tt> 
        <clt fqn="org.apache.commons.math3.util.DoubleArray.addElementRolling" api="addElementRolling" kind="method">
          addElementRolling(double) 
        </clt></tt> to basic list accessors. The <tt> 
        <clt fqn="org.apache.commons.math3.util.DoubleArray.addElementRolling" api="addElementRolling" kind="class">
          addElementRolling 
        </clt></tt> method adds an element (the actual parameter) to the end of the list and removes the first element in the list. </p> 
      <p> The <a href="../apidocs/org/apache/commons/math3/util/ResizableDoubleArray.html"> 
        <clt fqn="org.apache.commons.math3.util.ResizableDoubleArray" api="ResizableDoubleArray" kind="class">
          ResizableDoubleArray 
        </clt></a> class provides a configurable, array-backed implementation of the <tt> 
        <clt fqn="org.apache.commons.math3.util.DoubleArray" api="DoubleArray" kind="class">
          DoubleArray 
        </clt></tt> interface. When <tt>
        <clt fqn="org.apache.commons.math3.util.ResizableDoubleArray.addElementRolling" api="addElementRolling" kind="class">
         addElementRolling
        </clt></tt> is invoked, the underlying array is expanded if necessary, the new element is added to the end of the array and the &quot;usable window&quot; of the array is moved forward, so that the first element is effectively discarded, what was the second becomes the first, and so on. To efficiently manage storage, two maintenance operations need to be periodically performed -- orphaned elements at the beginning of the array need to be reclaimed and space for new elements at the end needs to be created. Both of these operations are handled automatically, with frequency / effect driven by the configuration properties <tt>expansionMode</tt>, <tt>expansionFactor</tt> and <tt>contractionCriteria.</tt> See <a href="../apidocs/org/apache/commons/math3/util/ResizableDoubleArray.html"> 
        <clt fqn="org.apache.commons.math3.util.ResizableDoubleArray" api="ResizableDoubleArray" kind="class">
          ResizableDoubleArray 
        </clt></a> for details. </p> 
     </div> 
     <div class="section"> 
      <h3>6.3 int/double hash map<a name="a6.3_intdouble_hash_map"></a></h3> 
      <p> The <a href="../apidocs/org/apache/commons/math3/util/OpenIntToDoubleHashMap.html"> 
        <clt fqn="org.apache.commons.math3.util.OpenIntToDoubleHashMap" api="OpenIntToDoubleHashMap" kind="class">
          OpenIntToDoubleHashMap 
        </clt></a> class provides a specialized hash map implementation for int/double. This implementation has a much smaller memory overhead than standard <tt>java.util.HashMap</tt> class. It uses open addressing and primitive arrays, which greatly reduces the number of intermediate objects and improve data locality. </p> 
     </div> 
     <div class="section"> 
      <h3>6.4 Continued Fractions<a name="a6.4_Continued_Fractions"></a></h3> 
      <p> The <a href="../apidocs/org/apache/commons/math3/util/ContinuedFraction.html"> 
        <clt fqn="org.apache.commons.math3.util.ContinuedFraction" api="ContinuedFraction" kind="class">
          ContinuedFraction 
        </clt></a> class provides a generic way to create and evaluate continued fractions. The easiest way to create a continued fraction is to subclass <tt> 
        <clt fqn="org.apache.commons.math3.util.ContinuedFraction" api="ContinuedFraction" kind="class">
          ContinuedFraction 
        </clt></tt> and override the <tt> 
        <clt fqn="org.apache.commons.math3.util.ContinuedFraction.getA" api="getA" kind="unknown">
          getA 
        </clt></tt> and <tt> 
        <clt fqn="org.apache.commons.math3.util.ContinuedFraction.getB" api="getB" kind="unknown">
          getB 
        </clt></tt> methods which return the continued fraction terms. The precise definition of these terms is explained in <a class="externalLink" href="http://mathworld.wolfram.com/ContinuedFraction.html"> Continued Fraction, equation (1)</a> from MathWorld. </p> 
      <p> As an example, the constant Pi can be computed using a <a class="externalLink" href="http://functions.wolfram.com/Constants/Pi/10/0002/">continued fraction</a>. The following anonymous class provides the implementation: </p> 
      <div class="source"> 
       <pre>ContinuedFraction c = new ContinuedFraction() {
    public double getA(int n, double x) {
        switch(n) {
            case 0: return 3.0;
            default: return 6.0;
        }
    }
    
    public double getB(int n, double x) {
        double y = (2.0 * n) - 1.0;
        return y * y;
    }
}</pre> 
      </div> 
      <p> Then, to evalute Pi, simply call any of the <tt>evalute</tt> methods (Note, the point of evalution in this example is meaningless since Pi is a constant). </p> 
      <p> For a more practical use of continued fractions, consider the <a class="externalLink" href="http://functions.wolfram.com/ElementaryFunctions/Exp/10/">exponential function</a>. The following anonymous class provides its implementation: </p> 
      <div class="source"> 
       <pre>ContinuedFraction c = new ContinuedFraction() {
    public double getA(int n, double x) {
        if (n % 2 == 0) {
            switch(n) {
                case 0: return 1.0;
                default: return 2.0;
            }
        } else {
            return n;
        }
    }
    
    public double getB(int n, double x) {
        if (n % 2 == 0) {
            return -x;
        } else {
            return x;
        }
    }
}</pre> 
      </div> 
      <p> Then, to evalute <i>e</i><sup>x</sup> for any value x, simply call any of the <tt>evalute</tt> methods. </p> 
     </div> 
     <div class="section"> 
      <h3>6.5 Binomial coefficients, factorials, Stirling numbers and other common math functions<a name="a6.5_Binomial_coefficients_factorials_Stirling_numbers_and_other_common_math_functions"></a></h3> 
      <p> A collection of reusable math functions is provided in the <a href="../apidocs/org/apache/commons/math3/util/ArithmeticUtils.html"> 
        <clt fqn="org.apache.commons.math3.util.ArithmeticUtils" api="ArithmeticUtils" kind="class">
          ArithmeticUtils 
        </clt></a> utility class. ArithmeticUtils currently includes methods to compute the following: </p> 
      <ul> 
       <li> Binomial coefficients -- &quot;n choose k&quot; available as an (exact) long value, <tt> 
         <clt fqn="org.apache.commons.math3.util.ArithmeticUtils.binomialCoefficient" api="binomialCoefficient" kind="method">
           binomialCoefficient(int, int) 
         </clt></tt> for small n, k; as a double, <tt> 
         <clt fqn="org.apache.commons.math3.util.ArithmeticUtils.binomialCoefficientDouble" api="binomialCoefficientDouble" kind="method">
           binomialCoefficientDouble(int, int) 
         </clt></tt> for larger values; and in a &quot;super-sized&quot; version, <tt> 
         <clt fqn="org.apache.commons.math3.util.ArithmeticUtils.binomialCoefficientLog" api="binomialCoefficientLog" kind="method">
           binomialCoefficientLog(int, int) 
         </clt></tt> that returns the natural logarithm of the value.</li> 
       <li> Stirling numbers of the second kind -- S(n,k) as an exact long value <tt> 
         <clt fqn="org.apache.commons.math3.util.ArithmeticUtils.stirlingS2" api="stirlingS2" kind="method">
           stirlingS2(int, int) 
         </clt></tt> for small n, k.</li> 
       <li> Factorials -- like binomial coefficients, these are available as exact long values, <tt> 
         <clt fqn="org.apache.commons.math3.util.ArithmeticUtils.factorial" api="factorial" kind="method">
           factorial(int) 
         </clt></tt>; doubles, <tt> 
         <clt fqn="org.apache.commons.math3.util.ArithmeticUtils.factorialDouble" api="factorialDouble" kind="method">
           factorialDouble(int) 
         </clt></tt>; or logs, <tt> 
         <clt fqn="org.apache.commons.math3.util.ArithmeticUtils.factorialLog" api="factorialLog" kind="method">
           factorialLog(int) 
         </clt></tt>. </li> 
       <li> Least common multiple and greatest common denominator functions. </li> 
      </ul> 
     </div> 
     <div class="section"> 
      <h3>6.6 Fast mathematical functions<a name="a6.6_Fast_mathematical_functions"></a></h3> 
      <p> Apache Commons Math provides a faster, more accurate, portable alternative to the regular <tt>Math</tt> and <tt>StrictMath</tt>classes for large scale computation. </p> 
      <p> FastMath is a drop-in replacement for both Math and StrictMath. This means that for any method in Math (say <tt>Math.sin(x)</tt> or <tt>Math.cbrt(y)</tt>), user can directly change the class and use the methods as is (using <tt> 
        <clt fqn="org.apache.commons.math3.util.FastMath.sin" api="sin" kind="method">
          FastMath.sin(x) 
        </clt></tt> or <tt> 
        <clt fqn="org.apache.commons.math3.util.FastMath.cbrt" api="cbrt" kind="method">
          FastMath.cbrt(y) 
        </clt></tt> in the previous example). </p> 
      <p> FastMath speed is achieved by relying heavily on optimizing compilers to native code present in many JVM todays and use of large tables. Precomputed literal arrays are provided in this class to speed up load time. These precomputed tables are used in the default configuration, to improve speed even at first use of the class. If users prefer to compute the tables automatically at load time, they can change a compile-time constant. This will increase class load time at first use, but this overhead will occur only once per run, regardless of the number of subsequent calls to computation methods. Note that FastMath is extensively used inside Apache Commons Math, so by calling some algorithms, the one-shot overhead when the constant is set to false will occur regardless of the end-user calling FastMath methods directly or not. Performance figures for a specific JVM and hardware can be evaluated by running the FastMathTestPerformance tests in the test directory of the source distribution. </p> 
      <p> FastMath accuracy should be mostly independent of the JVM as it relies only on IEEE-754 basic operations and on embedded tables. Almost all operations are accurate to about 0.5 ulp throughout the domain range. This statement, of course is only a rough global observed behavior, it is <i>not</i> a guarantee for <i>every</i> double numbers input (see William Kahan's <a class="externalLink" href="http://en.wikipedia.org/wiki/Rounding#The_table-maker.27s_dilemma">Table Maker's Dilemma</a>). </p> 
      <p> FastMath additionally implements the following methods not found in Math/StrictMath: </p> 
      <ul> 
       <li>asinh(double)</li> 
       <li>acosh(double)</li> 
       <li>atanh(double)</li> 
       <li>pow(double,int)</li> 
      </ul> The following methods are found in Math/StrictMath since 1.6 only, they are provided by FastMath even in 1.5 Java virtual machines 
      <ul> 
       <li>copySign(double, double)</li> 
       <li>getExponent(double)</li> 
       <li>nextAfter(double,double)</li> 
       <li>nextUp(double)</li> 
       <li>scalb(double, int)</li> 
       <li>copySign(float, float)</li> 
       <li>getExponent(float)</li> 
       <li>nextAfter(float,double)</li> 
       <li>nextUp(float)</li> 
       <li>scalb(float, int)</li> 
      </ul> 
     </div> 
     <div class="section"> 
      <h3>6.7 Miscellaneous<a name="a6.7_Miscellaneous"></a></h3> The 
      <a href="../apidocs/org/apache/commons/math3/util/MultidimensionalCounter.html"> 
       <clt fqn="org.apache.commons.math3.util.MultidimensionalCounter" api="MultidimensionalCounter" kind="class">
         MultidimensionalCounter 
       </clt></a> is a utility class that converts a set of indices (identifying points in a multidimensional space) to a single index (e.g. identifying a location in a one-dimensional array. 
     </div> 
    </div> 
   </div> 
  </div> 
  <div class="clear"> 
   <hr /> 
  </div> 
  <div id="footer"> 
   <div class="center">
     Copyright &copy; 2003-2013 
    <a href="http://www.apache.org/">The Apache Software Foundation</a>. All Rights Reserved. 
   </div> 
   <div class="center">
     Apache Commons, Apache Commons Math, Apache, the Apache feather logo, and the Apache Commons project logos are trademarks of The Apache Software Foundation. All other marks mentioned may be trademarks or registered trademarks of their respective owners. 
   </div> 
   <div class="clear"> 
    <hr /> 
   </div> 
  </div>  
 </body>
</html>